<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Karplus-Strong Synthesizer with Dynamic Source Material | Max Graf</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Karplus-Strong Synthesizer with Dynamic Source Material" />
<meta name="author" content="Max Graf" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A Sample-based Karplus-Strong (String) Synthesis Algorithm" />
<meta property="og:description" content="A Sample-based Karplus-Strong (String) Synthesis Algorithm" />
<link rel="canonical" href="https://maxgraf.space/code/2020/06/05/karplus-strong-synth.html" />
<meta property="og:url" content="https://maxgraf.space/code/2020/06/05/karplus-strong-synth.html" />
<meta property="og:site_name" content="Max Graf" />
<meta property="og:image" content="https://maxgraf.space/assets/images/karplus-strong-synth.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-06-05T18:02:52+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://maxgraf.space/assets/images/karplus-strong-synth.png" />
<meta property="twitter:title" content="Karplus-Strong Synthesizer with Dynamic Source Material" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@Max Graf" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Max Graf"},"dateModified":"2020-06-05T18:02:52+00:00","datePublished":"2020-06-05T18:02:52+00:00","description":"A Sample-based Karplus-Strong (String) Synthesis Algorithm","headline":"Karplus-Strong Synthesizer with Dynamic Source Material","image":"https://maxgraf.space/assets/images/karplus-strong-synth.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://maxgraf.space/code/2020/06/05/karplus-strong-synth.html"},"url":"https://maxgraf.space/code/2020/06/05/karplus-strong-synth.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://maxgraf.space/feed.xml" title="Max Graf" /><!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-0L66G8EX5T"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'G-0L66G8EX5T');
  </script>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/social.css">

  <!--  Favicon  -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
  <link rel="manifest" href="/assets/images/favicon/site.webmanifest">
  <link rel="mask-icon" href="/assets/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/assets/images/favicon/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="/assets/images/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
</head><body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Max Graf</a><nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
      </label>

      <div class="trigger">
          <a class="page-link" href="/music/">music</a>
          <a class="page-link" href="/research/">research</a>
          <a class="page-link" href="/code/">code</a>
          <a class="page-link" href="/about/">about</a></div>
    </nav></div>
</header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Karplus-Strong Synthesizer with Dynamic Source Material</h1>
    <p class="post-meta"><time class="dt-published" datetime="2020-06-05T18:02:52+00:00" itemprop="datePublished">
        Jun 5, 2020
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="a-sample-based-karplus-strong-string-synthesis-algorithm">A Sample-based Karplus-Strong (String) Synthesis Algorithm</h1>

<p>We present a real time synthesis algorithm based on the Karplus-Strong string synthesis method. 
Instead of a short burst of noise used to initially excite the string as specified in the original algorithm, 
we define a windowed section of a pre-existing audio recording as source material for excitation. 
This method offers a wide range of possible spectral combinations which allows for accurate control over the 
timbral characteristics of the synthesised sound. 
We evaluate and discuss the sonic qualities of the results achieved through variation of the source sample, 
window position and length.</p>

<div><div style="display: flex;
    flex-direction:column;
    align-items: center;
    margin-bottom: 36px;
">
    <img src="/assets/images/karplus-strong-synth.png" style="max-width: 60%; margin-bottom: 12px;" alt="Screenshot" />
    <span style="color: gray;">Screenshot</span>
</div></div>

<p><a href="https://github.com/maxgraf96/DAFX_Assignment_2/blob/master/Report.pdf" target="_blank">Report (PDF)</a> â€¢
<a href="https://github.com/maxgraf96/DAFX_Assignment_2" target="_blank">Code</a></p>

  </div><a class="u-url" href="/code/2020/06/05/karplus-strong-synth.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="social-links"><div class="social-footer">
  <div><a rel="me" style="display: flex; margin-top: -4.5px;" href="https://open.spotify.com/artist/4P18zJpH8WSmt5tWlACK4s?si=xr_Qfh4ER3mICw8eHascLQ&dl_branch=1" title="Max Graf @ Spotify" target="_blank"><img src="/assets/images/spotify.svg" style="height: 23.5px" alt="Spotify logo"></a></div>
  <div><a rel="me" style="display: flex; margin-top: -4.5px; margin-right: 1px;" href="https://scholar.google.com/citations?hl=en&user=Dq57Fx4AAAAJ" title="Max Graf @ Google Scholar" target="_blank"><img src="/assets/images/google-scholar.png" style="height: 16px; filter: brightness(3.2)" alt="Google Scholar logo"></a></div><div><a rel="me" href="https://github.com/maxgraf96" title="maxgraf96" target="_blank"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></div><div><a rel="me" href="https://www.instagram.com/_maxgraf" title="_maxgraf" target="_blank"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#instagram"></use></svg></a></div><div><a rel="me" href="https://www.youtube.com/channel/UC8B_BlQEDOehnXvGmYPjPDQ" title="UC8B_BlQEDOehnXvGmYPjPDQ" target="_blank"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#youtube"></use></svg></a></div><div><a rel="me" href="https://twitter.com/maxgraf__" title="maxgraf__" target="_blank"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></div><div><a rel="me" href="https://www.linkedin.com/in/max-graf-3265171a9" title="max-graf-3265171a9" target="_blank"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg></a></div><div><a rel="me" href="https://www.facebook.com/maxgraf1996" title="maxgraf1996" target="_blank"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#facebook"></use></svg></a></div></div>
</div>
  </div>

</footer><style>
  .img-zoomable {
    cursor: zoom-in;
  }

  .img-zoom-overlay {
    position: fixed;
    inset: 0;
    z-index: 9999;
    background: rgba(0, 0, 0, 0.75);
    opacity: 0;
    transition: opacity 220ms cubic-bezier(0.2, 0, 0.2, 1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  .img-zoom-overlay.is-open {
    opacity: 1;
  }

  .img-zoom-overlay::after {
    content: "Esc to close";
    position: fixed;
    right: 16px;
    bottom: 16px;
    color: rgba(255, 255, 255, 0.7);
    font: 500 12px/1.2 system-ui, -apple-system, sans-serif;
    letter-spacing: 0.02em;
    user-select: none;
    pointer-events: none;
  }

  .img-zoom-img {
    position: fixed;
    margin: 0;
    max-width: none;
    max-height: none;
    object-fit: contain;
    box-shadow: 0 28px 80px rgba(0, 0, 0, 0.55);
    cursor: zoom-out;
    will-change: top, left, width, height, border-radius;
    transition:
      top 260ms cubic-bezier(0.2, 0, 0.2, 1),
      left 260ms cubic-bezier(0.2, 0, 0.2, 1),
      width 260ms cubic-bezier(0.2, 0, 0.2, 1),
      height 260ms cubic-bezier(0.2, 0, 0.2, 1),
      border-radius 260ms cubic-bezier(0.2, 0, 0.2, 1);
  }

  @media (prefers-reduced-motion: reduce) {
    .img-zoom-overlay,
    .img-zoom-img {
      transition: none !important;
    }
  }
</style>

<script>
  (function () {
    const NO_ZOOM_SELECTOR = '[data-no-zoom], .no-zoom';
    const CLICKABLE_ANCESTOR_SELECTOR = 'a, button';
    const VIEWPORT_MARGIN = 24;

    let openState = null;

    function getTargetRect(img) {
      const vw = window.innerWidth;
      const vh = window.innerHeight;
      const maxW = Math.max(0, vw - VIEWPORT_MARGIN * 2);
      const maxH = Math.max(0, vh - VIEWPORT_MARGIN * 2);

      const naturalW = img.naturalWidth || img.width || 1;
      const naturalH = img.naturalHeight || img.height || 1;
      const ratio = naturalW / naturalH;

      let targetW = maxW;
      let targetH = targetW / ratio;
      if (targetH > maxH) {
        targetH = maxH;
        targetW = targetH * ratio;
      }

      return {
        left: (vw - targetW) / 2,
        top: (vh - targetH) / 2,
        width: targetW,
        height: targetH,
      };
    }

    function isZoomableImage(img) {
      if (!img) return false;
      if (img.closest('.img-zoom-overlay')) return false;
      if (img.closest(NO_ZOOM_SELECTOR)) return false;
      if (img.getAttribute('data-no-zoom') !== null) return false;
      if (img.getAttribute('role') === 'presentation') return false;
      if (img.alt === '' && img.getAttribute('aria-hidden') === 'true') return false;
      return true;
    }

    function setStyleRect(el, rect) {
      el.style.left = rect.left + 'px';
      el.style.top = rect.top + 'px';
      el.style.width = rect.width + 'px';
      el.style.height = rect.height + 'px';
    }

    function closeZoom() {
      if (!openState) return;

      const { overlay, zoomImg, sourceRect, restore } = openState;
      openState = null;

      window.removeEventListener('keydown', onKeyDown, true);
      window.removeEventListener('resize', closeZoom);

      setStyleRect(zoomImg, sourceRect);
      overlay.classList.remove('is-open');

      const cleanup = () => {
        overlay.removeEventListener('transitionend', cleanup);
        overlay.remove();
        restore();
      };

      overlay.addEventListener('transitionend', cleanup);
      // Fallback in case transitionend doesn't fire (e.g. reduced motion).
      setTimeout(cleanup, 350);
    }

    function onKeyDown(e) {
      if (e.key === 'Escape') closeZoom();
    }

    function openZoom(img) {
      if (openState) return;

      const sourceRect = img.getBoundingClientRect();
      const computed = window.getComputedStyle(img);
      const initialRadius = computed.borderRadius || '0px';

      const overlay = document.createElement('div');
      overlay.className = 'img-zoom-overlay';
      overlay.setAttribute('role', 'dialog');
      overlay.setAttribute('aria-modal', 'true');

      const zoomImg = document.createElement('img');
      zoomImg.className = 'img-zoom-img';
      zoomImg.alt = img.alt || '';
      zoomImg.src = img.currentSrc || img.src;
      zoomImg.decoding = 'async';
      zoomImg.loading = 'eager';
      zoomImg.style.borderRadius = initialRadius;

      setStyleRect(zoomImg, sourceRect);

      overlay.appendChild(zoomImg);
      document.body.appendChild(overlay);

      const previousOverflow = document.documentElement.style.overflow;
      document.documentElement.style.overflow = 'hidden';

      openState = {
        overlay,
        zoomImg,
        sourceRect,
        restore: () => {
          document.documentElement.style.overflow = previousOverflow;
        },
      };

      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) closeZoom();
      });
      zoomImg.addEventListener('click', closeZoom);

      window.addEventListener('keydown', onKeyDown, true);
      window.addEventListener('resize', closeZoom);

      requestAnimationFrame(() => {
        overlay.classList.add('is-open');
        const target = getTargetRect(img);
        setStyleRect(zoomImg, target);
        zoomImg.style.borderRadius = '16px';
      });
    }

    // Mark images as zoomable (for cursor affordance), but keep behavior via delegation.
    function markZoomables(root) {
      const scope = root || document;
      scope.querySelectorAll('img').forEach((img) => {
        if (isZoomableImage(img)) img.classList.add('img-zoomable');
      });
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => markZoomables(), { once: true });
    } else {
      markZoomables();
    }

    document.addEventListener(
      'click',
      (e) => {
        const target = e.target;
        const img = target && target.tagName === 'IMG' ? target : null;
        if (!isZoomableImage(img)) return;

        // If an image is inside a link/button, treat zoom as the primary action.
        const clickable = img.closest(CLICKABLE_ANCESTOR_SELECTOR);
        if (clickable) e.preventDefault();

        openZoom(img);
      },
      true
    );
  })();
</script>

</body>

</html>
